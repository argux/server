var group_hosts;$(function(){function t(t){group_hosts="desc"===VIEW_SORT?t.hosts.sort(function(t,e){return t.name<e.name}):t.hosts.sort(function(t,e){return t.name>=e.name}),e()}function e(){active_alert_count=0;var t=$("#alert-list");t.empty(),t.append('<div class="col-xs-12"><div class="panel panel-default"><table class="table table-striped"><thead><tr><th>Host</th><th>Alert</th><th>Duration</th><th>Acknowledged</th></tr></thead><tbody id="alert-list-body"></tbody></table></div></div>'),t=$("#alert-list-body"),$.each(group_hosts,function(e,s){active_alert_count+=s.active_alerts,$.each(s.alerts,function(e,a){"info"===a.severity?(icon="glyphicon-none",severity="info"):("crit"===a.severity&&(severity="danger"),"warn"===a.severity&&(severity="warning"),icon="glyphicon-exclamation-sign"),null===a.acknowledgement?ack='No (<a href="#">Acknowledge</a>)':ack='Yes (<a href="#">Show Ack</a>)',t.append('<tr class="'+severity+'"><td>'+s.name+"</td><td>"+a.name+"</td><td>"+moment(a.start_time).fromNow(!0)+"</td><td>"+ack+"</td></tr>")})}),active_alert_count>0?$("#alert_count").text(active_alert_count):$("#alert_count").text("")}function s(t){group_hosts="desc"===VIEW_SORT?t.hosts.sort(function(t,e){return t.name<e.name}):t.hosts.sort(function(t,e){return t.name>=e.name}),a()}function a(){var t=$("#host-list"),e=0;t.empty(),"list"===VIEW_TYPE&&(t.append('<div class="col-xs-12"><div class="panel panel-default"><table class="table table-striped"><thead><tr><th>Host</th><th>Items</th><th>Alerts</th></tr></thead><tbody id="host-list-body"></tbody></table></div></div>'),t=$("#host-list-body")),$.each(group_hosts,function(s,a){var i,o;switch(a.severity){case"warn":i="panel panel-warning",o="warning";break;case"crit":i="panel panel-danger",o="danger";break;default:i="panel panel-default",o=""}switch(VIEW_TYPE){case"grid":t.append('<div class="col-xs-12 col-sm-4 col-md-3 col-lg-2"><a class="host" href="/host/'+a.name+'"><div class="'+i+'"><div class="panel-heading active">'+a.name+'</div><div class="panel-body"><ul><li>Items: '+a.n_items+"</li><li>Alerts: "+a.active_alerts+"</li></ul></div></div></a></div>");break;case"list":t.append('<tr class="'+o+'"><td><a class="host" href="/host/'+a.name+'">'+a.name+"</a></td><td>"+a.n_items+"</td><td>"+a.active_alerts+"</td></tr>")}e+=a.active_alerts}),e>0?$("#alert_count").text(e):$("#alert_count").text("")}"hosts"===ACTION&&(host.get_group_members({group:HOST_GROUP,success:s}),$(".hostlist-view").click(function(t){VIEW_TYPE=$(this).data("view"),"list"===VIEW_TYPE?($(".hostlist-view-list").addClass("active"),$(".hostlist-view-grid").removeClass("active")):($(".hostlist-view-grid").addClass("active"),$(".hostlist-view-list").removeClass("active")),a()}),$(".hostlist-sort").click(function(t){VIEW_SORT=$(this).data("direction"),"desc"===VIEW_SORT?(group_hosts=group_hosts.sort(function(t,e){return t.name<e.name}),$(".hostlist-sort-desc").addClass("active"),$(".hostlist-sort-asc").removeClass("active")):(group_hosts=group_hosts.sort(function(t,e){return t.name>=e.name}),$(".hostlist-sort-asc").addClass("active"),$(".hostlist-sort-desc").removeClass("active")),a()})),"alerts"===ACTION&&host.get_group_alerts({group:HOST_GROUP,success:t})});
