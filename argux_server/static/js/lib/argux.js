var argux={VERSION:"0.0.1"};rest={CallType:{CREATE:"POST",READ:"GET",UPDATE:"POST",DELETE:"DELETE"},call:function(t){void 0===t.type&&(t.type=rest.CallType.READ),void 0===t.success&&(t.success=function(t){}),void 0===t.error&&(t.error=function(t){}),void 0===t.complete&&(t.complete=function(){}),void 0===t.data&&(t.data=""),$.ajax({url:t.url,type:t.type,headers:{"X-CSRF-Token":CSRF_TOKEN},dataType:"json",data:JSON.stringify(t.data),success:function(e){t.success(e)},error:function(e,s,o){t.error(e,s,o)},complete:function(){t.complete()}})}};var history_chart_config={type:"line",data:{datasets:[]},options:{responsive:!0,scales:{xAxes:[{type:"time",display:!0,time:{format:"YYYY-MM-DDTHH:mm:SS",displayFormats:{millisecond:"SSS [ms]",second:"HH:mm:ss",minute:"MM/DD HH:mm",hour:"YY/MM/DD HH:00",day:"YY/MM/DD",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},scaleLabel:{show:!0,labelString:"Date/Time"}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,suggestedMin:0,suggestedMax:1,callback:function(t){return unit.symbol?""+Math.round(10*t)/10+" "+item_unit_prefix+unit.symbol:""+Math.round(10*t)/10}},scaleLabel:{show:!0}}]},elements:{line:{tension:0},point:{radius:1}}}},host_overview_chart_config={type:"doughnut",data:{datasets:[{data:[0,0,0,1],backgroundColor:["#419641","#f0ad4e","#c12e2a","#e0e0e0"]}],labels:["Okay","Warning","Critical","Unknown"]},options:{responsive:!0,legend:{display:!1}}};host={get_host_overview:function(t){void 0===t.complete_callback&&(t.complete_callback=function(){}),rest.call({url:ARGUX_BASE+"/rest/1.0/host",success:host._get_host_overview_success,error:host._get_host_overview_error,complete:t.complete_callback})},_get_host_overview_success:function(t){var e=0,s=[0,0,0,0];$("#hosts").empty(),t.hosts=t.hosts.sort(function(t,e){return t.name>=e.name}),$.each(t.hosts,function(t,o){$("#hosts").append('<tr><td><a href="'+ARGUX_BASE+"/host/"+o.name+'">'+o.name+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+o.name+'/metrics">'+o.n_items+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+o.name+'/alerts">'+o.active_alerts+"</a></td></tr>"),"crit"===o.severity?s[2]+=1:"warn"===o.severity?s[1]+=1:"info"===o.severity?s[3]+=1:s[0]+=1,e+=o.active_alerts}),host_overview_chart_config.data.datasets[0].data=s,e>0?$("#alert_count").text(e):$("#alert_count").text("")},_get_host_overview_error:function(t){},create:function(t){if(void 0===t.hostname)throw"Hostname argument missing";void 0===t.description?description="":description=t.description,void 0===t.addresses?addresses=[]:addresses=t.addresses,data={description:description,address:addresses},rest.call({url:ARGUX_BASE+"/rest/1.0/host/"+t.hostname,type:rest.CallType.CREATE,data:data,success:t.success,error:t.error,complete:t.complete})},get_addresses:function(t){if(void 0===t.hostname)throw"Hostname argument missing";if(void 0===t.callback_success)throw"callback_success missing";rest.call({url:ARGUX_BASE+"/rest/1.0/host/"+t.hostname+"/addr",success:t.callback_success})}},monitors={get_monitors:function(t){void 0===t.complete_callback&&(t.complete_callback=function(){}),rest.call({url:ARGUX_BASE+"/rest/1.0/monitor/"+t.type,success:monitors._get_monitors_success,complete:t.complete_callback})},_get_monitors_success:function(t){$("#monitors").empty(),$.each(t.monitors,function(t,e){options="",$.each(e.options,function(t,e){options+='<li><span style="font-weight: bold">'+t+":</span> "+e+"</li>"}),e.active?button='<a class="monitor-pause-btn" data-hostname="'+e.host+'" data-address="'+e.address+'" data-type="'+ARGUX_MONITOR_TYPE+'" ><span class="glyphicon glyphicon-pause"></span></a> ':button='<a href="#" class="argux-monitor-play-btn"><span class="glyphicon glyphicon-play"></span></a> ',$("#monitors").append('<tr class=""><td>'+button+'<a href="'+ARGUX_BASE+"/monitor/"+ARGUX_MONITOR_TYPE+"/"+e.host+"/"+e.address+'/edit">'+e.host+" ("+e.address+")</a></td><td><ul>"+options+"</ul></td></tr>")}),$(".monitor-pause-btn").click(function(){alert("> "+$(this).data("hostname")+" > "+$(this).data("address")+" > "+ARGUX_MONITOR_TYPE)})},create:function(t){if(void 0===t.hostname)throw"Hostname argument missing";if(void 0===t.address)throw"address argument missing";void 0===t.options&&(t.options={}),data={options:t.options},rest.call({url:ARGUX_BASE+"/rest/1.0/monitor/"+t.hostname+"/"+t.address,type:rest.CallType.CREATE,data:data,success:monitors._create_success,error:monitors._create_error})},_create_error:function(t){},_create_success:function(t){}},user={};
