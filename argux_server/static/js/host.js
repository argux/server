$(function(){function t(t){var e={},a={},s={},o=$("#objects");o.empty(),t.items.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),$.each(t.items,function(t,s){var o="global",l=s.key,i="unknown",n="-",c="",d="";if(null!==s.category&&(o=s.category),null!==s.name&&(l=s.name),null!==s.unit&&(c=s.unit.symbol),void 0!==s.last_ts&&(n=s.last_ts),void 0!==s.last_val&&(i=s.last_val,""!==c)){switch(.1>i&&(d="m"),1e-4>i&&(d="&micro;"),i>100&&(d="k"),i>1e5&&(d="M"),i>1e8&&(d="G"),d){case"&micro;":i=1e6*i;break;case"m":i=1e3*i}i=Math.round(100*i)/100}a.hasOwnProperty(o)===!1&&(a[o]="");var m=ARGUX_BASE+"/host/"+ARGUX_HOST+"/item/"+s.key;e[o]+='<tr><td><a href="'+m+'"><span  data-toggle="tooltip" title="'+s.key+'">'+l+"</span></a></td><td>"+i+" "+d+c+'</td><td class="hidden-xs" data-toggle="tooltip" title="'+n+'">'+moment(n).fromNow()+'</td><td class="item-details"><a href="'+m+'/bookmark" aria-label="Bookmark"><span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span></a></td></tr>'}),$("#objects div.collapse").each(function(t,e){var a=e.id.substring(12);s[a]=$(this).hasClass("in")}),$("#objects").empty();for(var l in e)e.hasOwnProperty(l)&&($("#objects").append('<div class="panel panel-default"><div class="panel-heading metric-category"><a data-toggle="collapse" data-target="#table-items-'+l+'">'+l+' <span class="badge">'+a[l]+'</span></a></div><div class="collapse in" id="table-items-'+l+'"><table class="table table-striped table-condensed"><thead><tr><th>Name</th><th class="col-xs-2">Value</th><th class="col-sm-3 hidden-xs">Timestamp</th><th class="col-xs-2 col-sm-1"></th></tr></thead><tbody><tbody id="items-'+l+'"></tbody></table></div></div>'),s[l]===!1&&$("#table-items-"+l).removeClass("in"),$("#items-"+l).append(e[l]))}function e(){setTimeout(host.get_host_items,1e4,{hostname:ARGUX_HOST,success:t,complete:e})}"host.metrics"===ARGUX_ACTION&&host.get_host_items({hostname:ARGUX_HOST,success:t,complete:e})});