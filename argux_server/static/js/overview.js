var ctx=null,overviewChart=null;$(function(){function t(t){$("#objects").empty(),t.groups=t.groups.sort(function(t,e){return t.name>=e.name}),$.each(t.groups,function(t,e){$("#objects").append('<tr><td><a href="'+ARGUX_BASE+"/hostgroup/"+e.name+'">'+e.name+"</a></td><td></td></tr>")})}function e(t){var e=0,o=[0,0,0,0];$("#objects").empty(),t.hosts=t.hosts.sort(function(t,e){return t.name>=e.name}),$.each(t.hosts,function(t,s){$("#objects").append('<tr><td><a href="'+ARGUX_BASE+"/host/"+s.name+'">'+s.name+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+s.name+'/metrics">'+s.n_items+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+s.name+'/alerts">'+s.active_alerts+"</a></td></tr>"),"crit"===s.severity?o[2]+=1:"warn"===s.severity?o[1]+=1:"info"===s.severity?o[3]+=1:o[0]+=1,e+=s.active_alerts}),host_overview_chart_config.data.datasets[0].data=o,e>0?$("#alert_count").text(e):$("#alert_count").text(""),overviewChart.update()}function o(t,e,o){if(201!==t.status){var s=$(".modal-form-alerts");s.empty(),s.append('<div class="alert alert-danger alert-dismissible"><strong>Problem:</strong> '+t.responseJSON.message)}else $("#create-object-modal").modal("hide"),host.get_host_overview({complete_callback:get_host_complete_callback})}function s(){setTimeout(host.get_host_overview,1e4,{success:e,complete:s})}"overview"===ARGUX_ACTION&&(ctx=document.getElementById("overview").getContext("2d"),overviewChart=new Chart(ctx,host_overview_chart_config),host.get_host_overview({success:e,complete:s}),$("#new-object-form").submit(function(t){t.preventDefault(),host.create({hostname:$("#host-name").val(),description:$("#host-description").val(),error:o})})),"groups"===ARGUX_ACTION&&host.get_groups({success:t})});
