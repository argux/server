var ctx=null,overviewChart=null;$(function(){function e(e){var t=0,o=[0,0,0,0];$("#objects").empty(),e.hosts=e.hosts.sort(function(e,t){return e.name>=t.name}),$.each(e.hosts,function(e,s){$("#objects").append('<tr><td><a href="'+ARGUX_BASE+"/host/"+s.name+'">'+s.name+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+s.name+'/metrics">'+s.n_items+'</a></td><td><a href="'+ARGUX_BASE+"/host/"+s.name+'/alerts">'+s.active_alerts+"</a></td></tr>"),"crit"===s.severity?o[2]+=1:"warn"===s.severity?o[1]+=1:"info"===s.severity?o[3]+=1:o[0]+=1,t+=s.active_alerts}),host_overview_chart_config.data.datasets[0].data=o,t>0?$("#alert_count").text(t):$("#alert_count").text(""),overviewChart.update()}function t(e,t,o){if(201!==e.status){var s=$(".modal-form-alerts");s.empty(),s.append('<div class="alert alert-danger alert-dismissible"><strong>Problem:</strong> '+e.responseJSON.message)}else $("#create-host-modal").modal("hide"),host.get_host_overview({complete_callback:get_host_complete_callback})}function o(){setTimeout(host.get_host_overview,1e4,{success:e,complete:o})}"overview"===ARGUX_ACTION&&(ctx=document.getElementById("overview").getContext("2d"),overviewChart=new Chart(ctx,host_overview_chart_config),host.get_host_overview({success:e,complete:o}),$("#host-form").submit(function(e){e.preventDefault(),host.create({hostname:$("#host-name").val(),description:$("#host-description").val(),error:t})}))});
