$(function(){function e(){$(".user-remove").click(function(){var e=$(this).parents("tr").data("username");$("#remove-username").val(e),$("#remove-user-message").text('Do you want to remove the user "'+e+'"'),$("#dmcm").modal("show")})}function s(s){var a=$("#objects");a.empty(),$.each(s.users,function(e,s){s["protected"]!==!0?a.append('<tr data-username="'+s.name+'"><td><span class="glyphicon glyphicon-user"></span> '+s.name+'</td><td>-</td><td><div class="pull-right"><a href="#" class="user-remove"><span class="glyphicon glyphicon-trash"></span></a></div></td></tr>'):a.append('<tr data-username="'+s.name+'"><td><span class="glyphicon glyphicon-user"></span> '+s.name+'</td><td>-</td><td><div class="pull-right"></div></td></tr>')}),e()}function a(){setTimeout(user.get_users,1e4,{success:s,complete:a})}function r(e,a,r){if(201!==e.status){var t=$(".modal-form-alerts");t.empty(),t.append('<div class="alert alert-danger alert-dismissible"><strong>Problem:</strong> '+e.responseJSON.message)}else $("#create-user-modal").modal("hide"),$("#create-user-modal input").val(""),user.get_users({success:s})}"admin.users"===ARGUX_ACTION&&(user.get_users({success:s,complete:a}),$("#create-user-modal input").val(""),$("#create-user-modal").on("shown.bs.modal",function(){$("#create-user-modal input").val("")}),$("#new-object-form").submit(function(e){e.preventDefault(),user.create({username:$("#new-username").val(),password:$("#new-pass").val(),error:r})}),$("#remove-user-form").submit(function(e){user.remove({username:$("#remove-username").val()}),$("#dmcm").modal("hide")}))});
