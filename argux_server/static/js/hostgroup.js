var group_hosts;$(function(){function t(t){group_hosts="desc"===VIEW_SORT?t.hosts.sort(function(t,s){return t.name<s.name}):t.hosts.sort(function(t,s){return t.name>=s.name}),s()}function s(){active_alert_count=0;var t=$("#alert-list");t.empty(),t.append('<div class="col-xs-12"><div class="panel panel-default"><table class="table table-striped"><thead><tr><th>Host</th><th>Alert</th><th>Duration</th></tr></thead><tbody id="alert-list-body"></tbody></table></div></div>'),t=$("#alert-list-body"),$.each(group_hosts,function(s,e){active_alert_count+=e.active_alerts,$.each(e.alerts,function(s,a){t.append("<tr><td>"+e.name+"</td><td>"+a.name+"</td><td>0</td></tr>")})}),active_alert_count>0?$("#alert_count").text(active_alert_count):$("#alert_count").text("")}function e(t){group_hosts="desc"===VIEW_SORT?t.hosts.sort(function(t,s){return t.name<s.name}):t.hosts.sort(function(t,s){return t.name>=s.name}),a()}function a(){var t=$("#host-list"),s=0;t.empty(),"list"===VIEW_TYPE&&(t.append('<div class="col-xs-12"><div class="panel panel-default"><table class="table table-striped"><thead><tr><th>Host</th><th>Items</th><th>Alerts</th></tr></thead><tbody id="host-list-body"></tbody></table></div></div>'),t=$("#host-list-body")),$.each(group_hosts,function(e,a){var o,i;switch(a.severity){case"warn":o="panel panel-warning",i="warning";break;case"crit":o="panel panel-danger",i="danger";break;default:o="panel panel-default",i=""}switch(VIEW_TYPE){case"grid":t.append('<div class="col-xs-12 col-sm-4 col-md-3 col-lg-2"><a class="host" href="/host/'+a.name+'"><div class="'+o+'"><div class="panel-heading active">'+a.name+'</div><div class="panel-body"><ul><li>Items: '+a.n_items+"</li><li>Alerts: "+a.active_alerts+"</li></ul></div></div></a></div>");break;case"list":t.append('<tr class="'+i+'"><td><a class="host" href="/host/'+a.name+'">'+a.name+"</a></td><td>"+a.n_items+"</td><td>"+a.active_alerts+"</td></tr>")}s+=a.active_alerts}),s>0?$("#alert_count").text(s):$("#alert_count").text("")}"hosts"===ACTION&&(host.get_group_members({group:HOST_GROUP,success:e}),$(".hostlist-view").click(function(t){VIEW_TYPE=$(this).data("view"),"list"===VIEW_TYPE?($(".hostlist-view-list").addClass("active"),$(".hostlist-view-grid").removeClass("active")):($(".hostlist-view-grid").addClass("active"),$(".hostlist-view-list").removeClass("active")),a()}),$(".hostlist-sort").click(function(t){VIEW_SORT=$(this).data("direction"),"desc"===VIEW_SORT?(group_hosts=group_hosts.sort(function(t,s){return t.name<s.name}),$(".hostlist-sort-desc").addClass("active"),$(".hostlist-sort-asc").removeClass("active")):(group_hosts=group_hosts.sort(function(t,s){return t.name>=s.name}),$(".hostlist-sort-asc").addClass("active"),$(".hostlist-sort-desc").removeClass("active")),a()})),"alerts"===ACTION&&host.get_group_alerts({group:HOST_GROUP,success:t})});
